<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=utf-8" http-equiv="Content-Type">

<title>class BattingStatistic - Rails Application Documentation</title>

<link type="text/css" media="screen" href="./rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "./";
</script>

<script type="text/javascript" charset="utf-8" src="./js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="./js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="./index.html">Home</a>
    <a href="./table_of_contents.html#classes">Classes</a>
    <a href="./table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>app/models/batting_statistic.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link">Object
  
</nav>

    <!-- Included Modules -->
<nav id="includes-section" class="section">
  <h3 class="section-header">Included Modules</h3>

  <ul class="link-list">
  
  
    <li><span class="include">Mongoid::Document</span>
  
  
  
    <li><span class="include">Mongoid::Timestamps</span>
  
  
  </ul>
</nav>

    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-c-import">::import</a>
    
    <li><a href="#method-c-skipped">::skipped</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="./README_rdoc.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="./ApplicationController.html">ApplicationController</a>
  
    <li><a href="./ApplicationHelper.html">ApplicationHelper</a>
  
    <li><a href="./BattingStatistic.html">BattingStatistic</a>
  
    <li><a href="./BattingStatisticsController.html">BattingStatisticsController</a>
  
    <li><a href="./BattingStatisticsHelper.html">BattingStatisticsHelper</a>
  
    <li><a href="./FantasyPoint.html">FantasyPoint</a>
  
    <li><a href="./FantasyPointsController.html">FantasyPointsController</a>
  
    <li><a href="./FantasyPointsHelper.html">FantasyPointsHelper</a>
  
    <li><a href="./HomeController.html">HomeController</a>
  
    <li><a href="./HomeHelper.html">HomeHelper</a>
  
    <li><a href="./Player.html">Player</a>
  
    <li><a href="./PlayersController.html">PlayersController</a>
  
    <li><a href="./PlayersHelper.html">PlayersHelper</a>
  
    <li><a href="./SearchController.html">SearchController</a>
  
    <li><a href="./SearchHelper.html">SearchHelper</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class BattingStatistic</h1>

  <div id="description" class="description">
    
<p>The <a href="BattingStatistic.html">BattingStatistic</a> model is designed
to hold the batting statistics for a single player for a given year. The
statistics can either be imported or entered manually. The import format
can be a CSV file with the following columns:</p>
<ul><li>
<p>playerID</p>
</li><li>
<p>yearID</p>
</li><li>
<p>teamID</p>
</li><li>
<p>G - games played</p>
</li><li>
<p>AB - at batts</p>
</li><li>
<p>R - runs scored</p>
</li><li>
<p>H - hits</p>
</li><li>
<p>2B - doubles</p>
</li><li>
<p>3B - triples</p>
</li><li>
<p>HR - home runs</p>
</li><li>
<p>RBI - runs batted in</p>
</li><li>
<p>SB - stolen bases</p>
</li><li>
<p>CS - caught stealing</p>
</li></ul>

<p>Each instance of the model object will also include calculated statistics
for batting average and slugging percentage. These values will be
calculated in callback methods. The entire set of batting statistics will
be index by player_id.</p>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-class-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Class Methods</h3>

    
      <div id="method-c-import" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">import</span><span
            class="method-args">(file)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>The import method handles importing a CSV file of batting statistics. It
will overwrite the current set of statistics with the new ones imported
from the file.</p>
          

          
          <div class="method-source-code" id="import-source">
            <pre><span class="ruby-comment"># File app/models/batting_statistic.rb, line 99</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">import</span>(<span class="ruby-identifier">file</span>)
  <span class="ruby-constant">BattingStatistic</span>.<span class="ruby-identifier">delete_all</span>
  <span class="ruby-identifier">@@skipped_rows</span> = <span class="ruby-value">0</span>
  
  <span class="ruby-constant">CSV</span>.<span class="ruby-identifier">foreach</span>(<span class="ruby-identifier">file</span>.<span class="ruby-identifier">path</span>, <span class="ruby-identifier">headers</span><span class="ruby-operator">:</span> <span class="ruby-keyword">true</span>) <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">row</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">row</span>[<span class="ruby-string">'playerID'</span>].<span class="ruby-identifier">present?</span>
      <span class="ruby-identifier">stats</span> = <span class="ruby-constant">BattingStatistic</span>.<span class="ruby-identifier">new</span>
      <span class="ruby-identifier">stats</span>.<span class="ruby-identifier">player_id</span> = <span class="ruby-identifier">row</span>[<span class="ruby-string">'playerID'</span>]
      <span class="ruby-identifier">stats</span>.<span class="ruby-identifier">year</span> = <span class="ruby-identifier">row</span>[<span class="ruby-string">'yearID'</span>]
      <span class="ruby-identifier">stats</span>.<span class="ruby-identifier">team</span> = <span class="ruby-identifier">row</span>[<span class="ruby-string">'teamID'</span>]
      <span class="ruby-identifier">stats</span>.<span class="ruby-identifier">games_played</span> = <span class="ruby-identifier">row</span>[<span class="ruby-string">'G'</span>] <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">row</span>[<span class="ruby-string">'G'</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">stats</span>.<span class="ruby-identifier">at_bats</span> = <span class="ruby-identifier">row</span>[<span class="ruby-string">'AB'</span>] <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">row</span>[<span class="ruby-string">'AB'</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">stats</span>.<span class="ruby-identifier">runs_scored</span> = <span class="ruby-identifier">row</span>[<span class="ruby-string">'R'</span>] <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">row</span>[<span class="ruby-string">'R'</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">stats</span>.<span class="ruby-identifier">hits</span> = <span class="ruby-identifier">row</span>[<span class="ruby-string">'H'</span>] <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">row</span>[<span class="ruby-string">'H'</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">stats</span>.<span class="ruby-identifier">doubles</span> = <span class="ruby-identifier">row</span>[<span class="ruby-string">'2B'</span>] <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">row</span>[<span class="ruby-string">'2B'</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">stats</span>.<span class="ruby-identifier">triples</span> = <span class="ruby-identifier">row</span>[<span class="ruby-string">'3B'</span>] <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">row</span>[<span class="ruby-string">'3B'</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">stats</span>.<span class="ruby-identifier">home_runs</span> = <span class="ruby-identifier">row</span>[<span class="ruby-string">'HR'</span>] <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">row</span>[<span class="ruby-string">'HR'</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">stats</span>.<span class="ruby-identifier">runs_batted_in</span> = <span class="ruby-identifier">row</span>[<span class="ruby-string">'RBI'</span>] <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">row</span>[<span class="ruby-string">'RBI'</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">stats</span>.<span class="ruby-identifier">stolen_bases</span> = <span class="ruby-identifier">row</span>[<span class="ruby-string">'SB'</span>] <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">row</span>[<span class="ruby-string">'SB'</span>].<span class="ruby-identifier">nil?</span>
      <span class="ruby-identifier">stats</span>.<span class="ruby-identifier">caught_stealing</span> = <span class="ruby-identifier">row</span>[<span class="ruby-string">'CS'</span>] <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">row</span>[<span class="ruby-string">'CS'</span>].<span class="ruby-identifier">nil?</span>

      <span class="ruby-keyword">if</span> <span class="ruby-operator">!</span><span class="ruby-identifier">stats</span>.<span class="ruby-identifier">save</span>         
        <span class="ruby-identifier">logger</span>.<span class="ruby-identifier">debug</span>(<span class="ruby-node">&quot;[BattingStatistic.import] Could not save imported record - error: #{stats.errors.full_messages}&quot;</span>)
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">else</span>  
      <span class="ruby-identifier">@@skipped_rows</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>    
<span class="ruby-keyword">end</span></pre>
          </div><!-- import-source -->
          
        </div>

        

        
      </div><!-- import-method -->

    
      <div id="method-c-skipped" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">skipped</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Returns number of skipped rows during import.</p>
          

          
          <div class="method-source-code" id="skipped-source">
            <pre><span class="ruby-comment"># File app/models/batting_statistic.rb, line 90</span>
<span class="ruby-keyword">def</span> <span class="ruby-keyword">self</span>.<span class="ruby-identifier">skipped</span> 
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">@@skipped_rows</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- skipped-source -->
          
        </div>

        

        
      </div><!-- skipped-method -->

    
    </section><!-- public-class-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.2.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

